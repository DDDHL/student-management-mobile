(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/user"],{167:function(n,e,t){"use strict";(function(n){t(5);o(t(3));var e=o(t(168));function o(n){return n&&n.__esModule?n:{default:n}}wx.__webpack_require_UNI_MP_PLUGIN__=t,n(e.default)}).call(this,t(1)["createPage"])},168:function(n,e,t){"use strict";t.r(e);var o=t(169),i=t(171);for(var u in i)"default"!==u&&function(n){t.d(e,n,(function(){return i[n]}))}(u);t(173);var c,r=t(13),s=Object(r["default"])(i["default"],o["render"],o["staticRenderFns"],!1,null,"80842834",null,!1,o["components"],c);s.options.__file="pages/user/user.vue",e["default"]=s.exports},169:function(n,e,t){"use strict";t.r(e);var o=t(170);t.d(e,"render",(function(){return o["render"]})),t.d(e,"staticRenderFns",(function(){return o["staticRenderFns"]})),t.d(e,"recyclableRender",(function(){return o["recyclableRender"]})),t.d(e,"components",(function(){return o["components"]}))},170:function(n,e,t){"use strict";var o;t.r(e),t.d(e,"render",(function(){return i})),t.d(e,"staticRenderFns",(function(){return c})),t.d(e,"recyclableRender",(function(){return u})),t.d(e,"components",(function(){return o}));try{o={uRow:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-row/u-row")]).then(t.bind(null,323))},uCol:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-col/u-col")]).then(t.bind(null,331))},uAvatar:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-avatar/u-avatar")]).then(t.bind(null,339))},uIcon:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-icon/u-icon")]).then(t.bind(null,314))}}}catch(r){if(-1===r.message.indexOf("Cannot find module")||-1===r.message.indexOf(".vue"))throw r;console.error(r.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var i=function(){var n=this,e=n.$createElement;n._self._c},u=!1,c=[];i._withStripped=!0},171:function(n,e,t){"use strict";t.r(e);var o=t(172),i=t.n(o);for(var u in o)"default"!==u&&function(n){t.d(e,n,(function(){return o[n]}))}(u);e["default"]=i.a},172:function(n,e,t){"use strict";(function(n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=t(155),i=t(156),u={data:function(){return{titleHeight:50,isLogin:!1,listHeight:160,userInfo:{},options:[{name:"新华的圈"},{name:"我的信息"},{name:"操作记录"},{name:"休假申请"},{name:"申请记录"},{name:"联系我们"},{name:"信息反馈"},{name:"系统介绍"}]}},onLoad:function(){this.checkToken(),this.getHeight()},onTabItemTap:function(){this.checkToken()},methods:{checkToken:function(){var e=this;(0,o.testToken)().then((function(t){n.getStorage({key:"user",success:function(n){e.userInfo=n.data,e.listHeight=55}})})).catch((function(){e.userInfo={}}))},getHeight:function(){var n=wx.getMenuButtonBoundingClientRect();this.titleHeight=n.top},login:function(){n.navigateTo({url:"../wechatLogin/wechatLogin"}),this.wechatLogin()},wechatLogin:function(){this.wechatDingYue().then((function(e){e?n.$emit("login"):n.$emit("rejectLogin","请同意订阅,否则功能受限无法登录！")})),n.login({timeout:1e4,provider:"weixin",success:function(e){(0,i.getOpenId)({code:e.code}).then((function(e){e.errcode&&console.log("openid出错"),n.setStorage({key:"openId",data:e.openid})}))},fail:function(n){console.log("获取openId失败"+n)}})},wechatDingYue:function(){var e=["gc2vaD4ItYL1sdr4VRt_dqM0ms0oFFQTneZUbPEuSdE","jEmu9I5TdjrJpmrh--HZNr64ldXJLdjJKPi_nuQnF8Y","z9MZO3mlh_mhTsx7aFvkCNupGaIrpf7RB2wmmwwjqog"];return new Promise((function(t,o){n.requestSubscribeMessage({tmplIds:e,success:function(o){for(var i=!0,u=0;u<e.length;u++)"reject"==o[e[u]]&&(i=!1);n.getSetting({withSubscriptions:!0,itemSettings:!0,success:function(n){t(i)},fail:function(e){console.log("1111"),n.$emit("rejectLogin","网络出小差咯,请重新登录")}})},fail:function(e){n.showModal({title:"提示",content:"请打开右上角设置开启通知权限",success:function(e){(e.confirm||e.cancel)&&n.$emit("rejectLogin","请重新点击登录")}})}})}))},editInfo:function(){console.log("编辑信息")}}};e.default=u}).call(this,t(1)["default"])},173:function(n,e,t){"use strict";t.r(e);var o=t(174),i=t.n(o);for(var u in o)"default"!==u&&function(n){t.d(e,n,(function(){return o[n]}))}(u);e["default"]=i.a},174:function(n,e,t){}},[[167,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/user/user.js.map