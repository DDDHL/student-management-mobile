(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/user"],{"203d":function(e,n,t){"use strict";var o=t("6173"),i=t.n(o);i.a},"4ef8":function(e,n,t){"use strict";t.r(n);var o=t("ee57"),i=t.n(o);for(var u in o)"default"!==u&&function(e){t.d(n,e,(function(){return o[e]}))}(u);n["default"]=i.a},6173:function(e,n,t){},"7a12":function(e,n,t){"use strict";t.d(n,"b",(function(){return i})),t.d(n,"c",(function(){return u})),t.d(n,"a",(function(){return o}));var o={uRow:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-row/u-row")]).then(t.bind(null,"8cd0"))},uCol:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-col/u-col")]).then(t.bind(null,"2340"))},uAvatar:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-avatar/u-avatar")]).then(t.bind(null,"7d92"))},uIcon:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-icon/u-icon")]).then(t.bind(null,"9991"))}},i=function(){var e=this,n=e.$createElement;e._self._c},u=[]},dc95:function(e,n,t){"use strict";t.r(n);var o=t("7a12"),i=t("4ef8");for(var u in i)"default"!==u&&function(e){t.d(n,e,(function(){return i[e]}))}(u);t("203d");var c,s=t("f0c5"),a=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,"f4742d32",null,!1,o["a"],c);n["default"]=a.exports},ee57:function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=t("d773"),i={data:function(){return{titleHeight:50,isLogin:!1,listHeight:160,userInfo:{},options:[{name:"新华的圈"},{name:"我的信息"},{name:"操作记录"},{name:"休假申请"},{name:"申请记录"},{name:"联系我们"},{name:"信息反馈"},{name:"系统介绍"}]}},onLoad:function(){this.checkToken(),this.getHeight()},onTabItemTap:function(){this.checkToken()},methods:{checkToken:function(){var n=this;(0,o.testToken)().then((function(t){e.getStorage({key:"user",success:function(e){n.userInfo=e.data,n.listHeight=55}})})).catch((function(){n.userInfo={}}))},getHeight:function(){var e=wx.getMenuButtonBoundingClientRect();this.titleHeight=e.top},login:function(){e.navigateTo({url:"../wechatLogin/wechatLogin"}),this.wechatLogin()},wechatLogin:function(){this.wechatDingYue().then((function(n){n?e.$emit("login"):e.$emit("rejectLogin","请同意订阅,否则功能受限无法登录！")})),e.login({timeout:1e4,provider:"weixin",success:function(n){e.request({url:"https://api.weixin.qq.com/sns/jscode2session",method:"GET",data:{appid:"wx3f33e737660f733a",secret:"c39dfca395d2e2b6ed2969f2d77dbae7",js_code:n.code},success:function(n){e.setStorage({key:"openId",data:n.data.openid})}})},fail:function(e){console.log("获取openId失败"+e)}})},wechatDingYue:function(){var n=["gc2vaD4ItYL1sdr4VRt_dqM0ms0oFFQTneZUbPEuSdE","jEmu9I5TdjrJpmrh--HZNr64ldXJLdjJKPi_nuQnF8Y","z9MZO3mlh_mhTsx7aFvkCNupGaIrpf7RB2wmmwwjqog"];return new Promise((function(t,o){e.requestSubscribeMessage({tmplIds:n,success:function(o){for(var i=!0,u=0;u<n.length;u++)"reject"==o[n[u]]&&(i=!1);e.getSetting({withSubscriptions:!0,success:function(n){console.log(n),n.subscriptionsSetting.mainSwitch?e.showModal({title:"提示",content:"请勾选总是保持选择,否则影响后续服务通知！请重新登录谢谢",success:function(n){e.switchTab({url:"../user/user",success:function(e){var n=getCurrentPages().pop();void 0!=n&&null!=n&&n.onLoad()}})}}):t(i)},fail:function(n){e.$emit("rejectLogin","网络出小差咯,请重新登录")}})},fail:function(n){e.$emit("rejectLogin","网络出小差咯,请重新登录")}})}))},editInfo:function(){console.log("编辑信息")}}};n.default=i}).call(this,t("543d")["default"])},fe46:function(e,n,t){"use strict";(function(e){t("b3b6");o(t("66fd"));var n=o(t("dc95"));function o(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=t,e(n.default)}).call(this,t("543d")["createPage"])}},[["fe46","common/runtime","common/vendor"]]]);